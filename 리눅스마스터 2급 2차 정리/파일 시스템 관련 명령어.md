# 1. 권한 및 그룹 설정

## chown

파일과 디렉터리의 사용자 소유권과 그룹 소유권 변겅
<br>
**chwon [옵션] 소유자[:그룹명] 파일명**

### 옵션

- -R : 하위 디렉터리를 포함하여 디렉터리 내부의 모든 파일의 소유권 변경

---

## chgrp

파일이나 디렉터리의 그룹 소유권을 변겅
<br>
chgrp [옵션] 그룹명 파일명

### 옵션

- -R : 하위 디렉터리를 포함하여 디렉터리 내부의 모든 파일의 그룹 소유권 변경

---

## chmod

파일이나 디렉터리의 접근 허가권을 변경하는 명령어
<br>
chmod [옵션] 파일명

### 옵션

- -R: 하위 디렉터리에 포함되어 있는 모든 디렉터리 및 파일의 권한 변경

---

## umask

새로 생성되는 파일이나 디렉터리의 기본 허가권 값을 지정
<br>
파일의 기본 권한은 **666**, 디렉터리의 기본 권한은 **777**
<br>
umask는 디폴트 권한 값 변경

### 옵션

- -S : umask 값을 문자로 표기

---

## SetUID 와 SetGID

프로세스가 실행되는 동안 해당 프로세스의 root 권하늘 임시로 가져오는 기능

### 특수권한의 표기 방법

|            | 코드 | 절대값 |                 설명                 |
| :--------: | :--: | :----: | :----------------------------------: |
|   SetUID   |  s   |  4000  |    프로세스 실행 당시 UID로 설정     |
|   SetGID   |  s   |  2000  |    프로세스 실행 당시 GID로 설정     |
| Sticky bit |  t   |  1000  | 실행 후에도 메모리를 점유하도록 설정 |

---

## Sticky bit

일반적으로 공용 디렉터리를 사용할 때 sticky bit를 설정하여 사용
<br>
해당 파일의 소유자나 root만이 변경 가능

---

## 디스크 쿼터

- quotaoff : 쿼터 서비스를 비활성화한다
  - 옵션
    - -a : 파티션 정보 출력
    - -u : 사용자 쿼터 비화렁화 (u = user --> 사용자)
    - -g : 그룹 쿼터 비활성화 (g = group --> 그룹)
    - -v : 메시지 출력
- quotacheck : 파일 시스템의 디스크 사용 상태 검색
  - 옵션
    - -a : 모든 파일 시스템을 체크 (all)
    - -u : 사용자 쿼터 관련 체크 (user)
    - -g : 그룹 쿼터 관련 체크 (group)
    - -m : 재마운트를 생략 (마운트니까 m)
    - -n : 첫 번쨰 검색된 것을 사용 (첫 번째 == 숫자 --> n)
    - -p : 처리 결과를 출력 (print)
    - -v : 파일 시스템의 상태를 보여줌
- edquota : 편집기를 이용하여 사용자나 그룹에 디스크 사용량 할당 (편집기 == Edit --> **ed**quota)
  - 옵션
    - -u : 사용자 디스크 할당량 설정 (user)
    - -g : 그룹 디스크 할당량 설정 (group)
    - -t : 디스크 할당량 유예기간 설정 (기간 == 시간 --> t)
    - -p : 디스크 할당량 설정을 다른 사용자와 동일하게 설정
- sequota : 편집기가 아닌 명령행에서 직접 사용자나 그룹에 디스크 사용량을 할당하는 명령어
  - 옵션
    - -u : 사용자 디스크 할당량 설정 (user)
    - -g : 그룹 디스크 할당량 설정 (group)
    - -a : 해당 시스템의 모든 설정 (all)
    - -t : 유예기간을 초 단위로 설정 (기간 == 시간 --> t)

---

# 2. 파일 시스템의 관리

## 개요

- Super Block
  - 해당 파일 시스템 관련 정보 저장
  - 블록의 크기
  - 총 블록의 개수와 블록 그룹의 개수
  - inode의 개수
- Group Descriptor Table
  - 각 Block Group을 관리하는 정보 저장
  - 블록 번호 같은 것 들어있다
- Block Bitmap
  - 그룹 내에 있는 각 블록의 사용 상태를 나타냄
- inode
  - 파일에 대한 제어 정보 및 데이터 블록 포인터 저장
  - 파일 이름에 부여되는 고유번호, 파일 형태, 크기, 위치 등등

---

## 종류

- ext
  - 리눅스 초기에 사용되던 파일 시스템, 호환성 없음
  - 2GByte의 데이터와 파일명을 255자까지 지정 가능
  - 아이노스 수정 불가
- ext2
  - 고용량 디스크 사용
  - 쉽게 호환
  - 업그레이드 쉬움
- ext3
  - 리눅스의 대표적인 <span style="color:tomato">저널링(journling)</span> 지원
  - ACL을 통한 접근 제어 지원
- ext4
  - 16Tb 지원
  - 64비트 기억 공간 제한 없앰
  - .은 현재 디렉터리, ..은 부모 디렉터리

---

## 저널링 파일 시스템 == <span style="color:tomato">ext3</span>

시스템의 비정상적인 종료 시 저널(로그)을 이용해 빠르면서도 안정적인 복구 가능
<br>
저널링 기술이 적용된 파일 시스템은 ext, ext4, XFS, JFS, ResierFS

---

## 네트워크 파일 시스템

- <span style="color:tomato">SMB</span>
  - <span style="color:tomato">삼바</span> 파일 시스템을 마운트 지정
  - Server Manager Block
  - 리눅스, 유닉스, 윈도우와의 자료 및 하드웨어 공유
- CIFS
  - Common Internet File System
  - SMB를 확장한 파일 시스템
- <span style="color:tomato">NFS</span>
  - Network File System
  - 썬마이크로시스템이 개발한 네트워크 공유 프로토콜

---

## mount

마운트는 특정 디바이스를 특정 디렉터리처럼 사용하기 위해 장치와 디렉터리를 연결하는 것
<br>
리눅스는 PnP(하드웨어를 연걸하면 운영체제가 알아서 적용해주는 것) 기능을 지원하지만 지원하는 하드웨어가 많지 않아서 수동으로 마운트해서 사용하고 끝나면 언마운트
<br>
**mount [옵션][디바이스명][디렉터리명]**

### 옵션

- -a : 모든 시스템 마운트(all)
- -n : 정보를 저장하지 않고 마운트(no)
- -f : 마운트 가능한지 테스트
- -t : 파일 시스템 마운트
- -o : 추가 설정

<span style="color:tomato">/etc/mtab</span>은 현재 마운트된 블록 시스템 정보를 표시

---

## unmount

마운트 해제
<br>
unmount [옵션][디바이스명][디렉터리명]

### 옵션

- -a : /etc/mtab에 명시된 파일 시스템을 마운트 해제
- -n : /etc/mtab 파일을 갱신하지 않고 마운트 해제(갱상 하지 않으니깐 no)
- -t : 언마운트할 파일 시스템을 지정(타입을 지정한다 -> type)

---

## eject

이동식 보조기억장치(DVD 또는 CD-ROM) 등과 가은 미디어 해제

### 옵션

- -r : 시디롬을 마운트 해제(CD-ROM --> r)
- -f : 플로피를 마운트 해제(플로피 --> f)

---

## fdisk

새로운 파티션의 생성, 기존 파티션의 삭제, 파티션의 타입 결정

### 옵션

- -v : fdisk 버전 정보 표시(version --> v)
- -l : 현재 디스크의 파틱션 테이블 정보 표시(리스트처럼 보여준다 --> l)
- -s : 지정된 파티션의 크기를 블록 단위로 표시(크기 == size --> s)

### 명령어

- p : 디스크 정보 표시(표시 == print --> p)
- n : 파티션 생성(new --> n)
- t : 파티션 속성 지정(속성 == type --> t)
- d : 파티션 삭제(삭제 == delete --> d)
- w : 변경된 파티션 정보 저장(저장 == write --> w)
- q : 파티션 설정 작업 종료(종료 == quit --> q)

---

## mkfs

Make File System
<br>
리눅스 파일 시스템을 생성
<br>
mkfs [옵션] 장치이름

### 옵션

- -V : 자세한 정보 보기(보기 == vogi --> v)
- -t 파일 시스템 : 생성할 파일 시스템 타입 지정(type --> t)
- -c : 파일 시스템을 생성하기 전에 배드블록 검사(검사 == check --> c)
- -l 파일명 : 지정된 파일명으로부터 배드블록 목록 읽기(목록 == list --> l)
- -v : 작업 상태와 결과를 자세히 보기

---

## mke2fs

ext2, ext3, ext4 타입의 리눅스 파일 시스템을 생성하는 명령어
<br>
mke2fs [옵션] 장치명

### 옵션

- -t : 파일 시스템 타입 지정(ext2, ext3, ext4 등)(타입 == type --> t)
- -b : 블록 크기를 바이트 수로 지정(바이트 == byte --> b)
- -f : 프레그먼트 크기 지정(fragment --> f)
- -i : inode당 바이트 수를 지정(inode --> i)
- -j : 파티션을 저널링 파일 시스템 <span style="color:tomato">ext3</span>으로 생성(저널렁 --> j)
- -R : RAID4 장치를 포맷할 때 사용하는 특수 옵션(RAID --> R)

---

## fsck

File System Check
<br>
파일 시스템의 무결성을 점검하고 대화식으로 복구
<br>
디렉터리 <span style="color:tomato">/lost+found</span>은 fsck에서 사용하는 디렉터리이다.

### 옵션

- -A : 모든 파일 시스템 점검(all -> A)
- -a : 질의 없이 자동 복구(없이 == aubxi --> a)
- -r : 질의 후 복구(restore --> r)
- -s : fsck 동작을 시리얼화(시리얼 == serial --> s)
- -t 파일 시스템 : 점검할 파일 시스템 유형 지정(유형 == type --> t)

---

## e2fsck

ext2, ext3, ext4 타입의 리눅스 파일 시스템을 점검 및 복구하는 명령어

### 옵션

- -p : 파일 시스템을 검사하면서 자동으로 복구
- -n : 모든 질문에 대한 응답을 no로 취급(no -> n)
- -y : 모든 질문에 대한 응답을 yes로 취급(yes -> y)
- -c : BAD BLOCK을 CHECK(check -> c)
- -f : 깨끗한 파일 시스템까지 강제적으로 check(강제 == force --> f)

---

## <span style="color:tomato">du</span>

Disk Usage
<br>
디렉터리별로 <span style="color:tomato">디스크 사용량</span>을 확인

### 옵션

- -h : 용량 단위 표기
- -a : 디렉터리가 아닌 모든 파일에 대한 정보 표시(all - a)
- -m : 결과 값을 MB 단위로 표시(MB --> m)
- -k : 결과 값을 KB 단위로 표시, 기본값(KB --> k)
- -s : 사용량의 총 합계 표시(합계 == sum --> s)
- -c : 모든 파일의 디스크 사용 정보를 보여주고 나서 합계를 표시

---

## <span style="color:tomato">df</span>

시스템에 <span style="color:tomato">마운트된 하드 디스크</span>의 남은 용량을 확인할 떄 사용하는 명령

### 옵션

- -h : 용량 단위 표시
- -T : 파일 시스템 유형과 파티션 정보 출력(type --> T)
- -t : 파일 시스템 유형을 지정(type--> t)
- -a : 모든 파일 시스템 출력(all --> a)
- -i : inode 사용률 확인(idnoe -> i)

---

## /etc/fstab

파일 시스템 정보를 정적으로 저장하고 있는 파일
<br>
리눅스 파일 시스템 정보와 부팅 시 마운트 정보를 가지고 있다.
