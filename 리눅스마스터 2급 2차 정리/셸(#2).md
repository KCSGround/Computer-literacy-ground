# 1. 개념 및 종류

## 개념

명령어 해석기이다.

로그인할 때 실행되어 사용자별로 사용 환경 설정을 가능하게 한다.

강력한 스크립트 언어이다.

입출력 방향 재지정(redirection)과 파이트(pipe) 기능을 제공한다.

포그라운드/백그라운드 프로세스를 실행한다.

---

## 종류

본셸 계열과 C셸 계열로 나뉜다.

사용자 프롬프트가 $이면 본셸, %이면 C셸

### 본셸 계열

- 본셸
  - /bin/sh
  - 벨 연구소의 스티븐 **본**이 개발
  - 유닉스에서 기본 셸
- 콘셸
  - /bin/ksh
  - 데이비드 **콘**이 개발
  - 본셀을 확장해서 만듦
  - 명령어 완성 기능, 히스토리 기능

* 배쉬셸
  - /bin/bash
  - 브레인 폭스가 개발
  - GNU 프로젝트에 의해 개발
  - Linux 표준 셸
  - 명령어 완성 기능, 히스토리 기능, 명령어 치환, 편집 등의 지원
  - POSIX와 호환 가능
* 지셸
  - /bin/zsh
  - 강력한 history 기능

### C셸 계열

- C셸
  - /bin/csh
  - 빌조이가 개발
  - C언어의 특징이 많이 포함
  - 히스토리. 별명, 작업 제어 등의 기능 포함
- tc셸

  - /bin/tcsh
  - BSD 계열에서 가장 많이 사용
  - 명령어 편집 기능
  - emacs
  - hustory explorer
  - 자동 완성 기능

---

## 셸 확인 및 변경

셸은 사용자가 로그인 후 자동으로 생성되는 로그인 셸과 사용자가 직접 변경 실행하는 서브 셸로 구분

### 로그인 셸 확인

- /etc/shells 파일에서 사용할 수 있는 셸들을 확인 가능
- /etc/passwd 파일에서 계정마다 할당된 셸을 확인 가능
- 명령어 'echo $SHELL'은 현재 로그인한 사용자가 사용하고 있는 셸을 확인

### 셸 변경

로그인 셸 변경은 반영구적인 셸 변경 방법

### 명령어 chsh

- -s : 지정하는 셸을 앞으로 사용할 로그인 셸로 변경
- -l : 지정된 셸을 나열

### usermod

관리자 환경에서 지정된 계정의 정보를 변경할 떄 사용

---

# 2. 환경설정

## 환경 변수와 셸 변수

- 환경 변수(전역 변수)
  - 전체 셸에서 사용 가능한 전역 변수
  - 서브 셸에 상속 가능
  - 환경 변수 확인 명령 : env
- 셸 변수(지역 변수)
  - 현재 로그인 셸에서만 사용 각능한 지역 변수
  - 서브 셸에 기능 상속 불가능
  - 셸 변수 확인 명령 : set

---

## 환경 변수 설정

- export : 환경 변수 리스트 확인
- export 변수명 = 변수값 : 해당 변수명에 변수값 등록
- echo 변수명 : 변수명에 해당하는 환경 변수 값 확인
- export 변수명 = $변수명:변수값 : 기존 변수명에 변수 값 추가
- unset 변수명 : 변수 정의 해제

---

## 프롬프트 설정 형식

셸의 프롬프트 형식을 사용자 임의대로 변경 가능

- \t : 24시로 현재 시간 표시(시간 == time --> t)
- \W : 현재 작업 디렉터리의 전체 경로 중 마지막 디렉터리만 표시
- \w : 현재 작업 디렉터리를 절대 경로로 표시
- \s : 사용 중인 셸 이름 표시
- \u : 현재 사용자의 이름 표시
- \h : 호스트 이름 표시

---

## 환경 설정 파일

전역적 파일에는 <span style = 'color:tomato'>사용자에게 공통으로</span> 영향을 주는 내용이 들어있으며 /etc 아래에 위치한다.

지역적 파일은 <span style = 'color:tomato'>사용자 개개인</span>을 위한 설정 내용이 들어 있으며, 사용자의 홈 디렉터리에서 숨김 파일 형태로 위치한다.

- 전역 설정 파일
  - /etc/profile
    - 모든 사용자의 셀 환경 제어
    - 환경 변수와 bash가 수행 시 실행되는 프로그렘 제어
    - 관리자만 설정 가능
  - /etc/bashrc
    - alias 와 bash가 수행 시 실행되는 함수를 전역적으로 제어
- 지역 설정 파일
  - ~/.bash_profile
    - 개인 사용자의 셸 환경을 제어
    - PATH, 환경 변수 등 설정
    - 로그인 시 로딩
  - ~/.bash_history
    - 사용자가 명령어나 키보드로 입력한 내용들을 파일에 기록
  - ~/.bashrc
    - alias 와 bash가 수행 시 실행되는 함수를 제어
  - ~/.bash_logout
    - 로그아웃하기 직전에 실행되는 시스템 설정 파일

### /etc/profile.d은 몇몇 프로그램들이 시작 시 자동 실행할 스크립트 파일 경로를 넣어둔다.

---

## History

### 옵션

- !! : 마지막으르 실행한 명령문 실행
- !n : n번째 명령어 실행
- !-n : 현재 명령행에서 n만큼 뺀 명령어 실행
- !string : 가장 최근에 'string'으로 시작하는 명령어 실행
- !$ or !!$ : 마지막 명령의 argument
- !\* : 마지막으로 실행된 명령에 사용된 모든 argument
- !?string? : 가장 최근에 string을 포함하고 있는 단어를 나타냄

### 환경 변수

- HISTSIZE
  - 히스토리 스택의 크기 지정 (크기 == size)
- HISTFILE (파일 == file)
  - 히스토리 파일 위치
- HISTFILESIZE (파일 크기 == filesize)
  - 물리적인 히스토리 파일 크기
- HISTTIMEFORMAT(형태 == format)
  - 히스토리 명령어 수행 시간 출력 형태 지정
- HISCONTROL
  - 중복되는 명령어에 대한 기록 유무를 지정하는 변수

---

## alias

자주 사용하는 명령어를 특정 문자로 입력해 두고 간편하게 사용할 수 있게 하는 기능이다.

- alias : 설정되어 있는 벼령들 확인
- alias 별명 = '명령어 정의' : 새로운 별명 정의
- unalias 별명 = 지정된 별명 해제
